(()=>{var{useState:x,useEffect:T,useMemo:oe,useRef:H,useCallback:vt}=React,n=({name:l,className:c="",style:i={},size:h,strokeWidth:g=2})=>{let w=React.useRef(null);return React.useEffect(()=>{if(w.current&&window.lucide){w.current.innerHTML="";let k=document.createElement("i");k.setAttribute("data-lucide",l),w.current.appendChild(k),window.lucide.createIcons({root:w.current,attrs:{"stroke-width":g,width:h||"1em",height:h||"1em"}})}},[l,h,g]),React.createElement("span",{ref:w,className:`inline-flex items-center justify-center ${c}`,style:{...i,verticalAlign:"middle",lineHeight:"1"}})},wt=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316"],yt=()=>wt[Math.floor(Math.random()*wt.length)],oa=l=>{if(!l)return"";try{let c=new Date(Number(l)||l);if(!isNaN(c.getTime()))return`${String(c.getDate()).padStart(2,"0")}.${String(c.getMonth()+1).padStart(2,"0")}.${c.getFullYear()}`;let i=l.split(/[-/.]/);return i.length===3?i[0].length===4?`${i[2].padStart(2,"0")}.${i[1].padStart(2,"0")}.${i[0]}`:l.includes("/")?`${i[1].padStart(2,"0")}.${i[0].padStart(2,"0")}.${i[2]}`:`${i[0].padStart(2,"0")}.${i[1].padStart(2,"0")}.${i[2]}`:l}catch{return l}};var la=l=>{if(!l)return"#";let c=l.trim();return c.startsWith("http")?c:"https://"+c},ra=l=>{if(!l||typeof l!="string")return null;if(l.includes("reddit.com")){let i=l.match(/comments\/([a-zA-Z0-9]+)/);return i?i[1]:null}let c=l.match(/status\/(\d+)/);return c&&/^\d+$/.test(c[1])?c[1]:null},na=l=>{if(!l||typeof l!="string")return"@user";if(l.includes("reddit.com")){let i=l.match(/r\/([a-zA-Z0-9_]+)/);return i?`r/${i[1]}`:"Reddit User"}let c=l.match(/(?:x\.com|twitter\.com)\/([a-zA-Z0-9_]+)/);return c?`@${c[1]}`:"@user"},pe=l=>l?l.match(/\.(mp4|webm|ogg|m3u8)/i)?l:l.includes("name=")?l.replace(/name=[a-zA-Z0-9_]+/,"name=orig"):l.includes("pbs.twimg.com")?l+(l.includes("?")?"&":"?")+"name=orig":l:"",ia=async l=>{try{let i=await(await fetch(l)).blob(),h=document.createElement("a");h.href=URL.createObjectURL(i),h.download="bookmark_base_media",h.click()}catch{window.open(l,"_blank")}},da=({src:l,poster:c,className:i,controls:h,autoPlay:g,muted:w})=>{let k=H(null);return T(()=>{let N=k.current;if(!N||!l)return;let u;return l.includes(".m3u8")&&window.Hls&&window.Hls.isSupported()?(u=new window.Hls,u.loadSource(l),u.attachMedia(N),g&&u.on(window.Hls.Events.MANIFEST_PARSED,()=>N.play().catch(()=>{}))):(N.src=l,g&&N.play().catch(()=>{})),()=>u&&u.destroy()},[l,g]),React.createElement("video",{ref:k,className:i,controls:h,muted:w,poster:c,playsInline:!0,preload:"metadata"})},Nt=({tweetId:l})=>{let c=H(null);return T(()=>{window.twttr&&l&&c.current&&(c.current.innerHTML="",window.twttr.widgets.createTweet(l,c.current,{theme:"light",align:"center",dnt:!0}))},[l]),React.createElement("div",{ref:c,className:"w-full min-h-[150px] flex items-center justify-center bg-slate-50 rounded-xl"})},kt=React.memo(({url:l})=>{let c="";try{c=`https://www.redditmedia.com${new URL(l).pathname}?ref_source=embed&ref=share&embed=true`}catch{c=l}return React.createElement("div",{className:"w-full bg-slate-50 flex justify-center rounded-xl overflow-hidden",style:{minHeight:"300px"}},React.createElement("iframe",{src:c,sandbox:"allow-scripts allow-same-origin allow-popups",style:{border:"none",width:"100%",height:"400px"},scrolling:"yes"}))}),ca=l=>{if(!l)return"";let c=/(\[[^\]]+\]\(https?:\/\/[^\s\)]+\)|https?:\/\/[^\s]+|#\w+|@\w+)/g;return String(l).split(`
`).map((h,g,w)=>{let N=h.split(c).map((u,U)=>{if(!u)return u;let L=u.match(/^\[([^\]]+)\]\((https?:\/\/[^\s\)]+)\)$/);return L?React.createElement("a",{key:U,href:L[2],target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline break-all",onClick:D=>D.stopPropagation()},L[1]):/^https?:\/\//.test(u)?React.createElement("a",{key:U,href:u,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline break-all",onClick:D=>D.stopPropagation()},u.replace(/^https?:\/\/(www\.)?/,"")):u.startsWith("#")?React.createElement("a",{key:U,href:`https://x.com/hashtag/${u.substring(1)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",onClick:D=>D.stopPropagation()},u):u.startsWith("@")?React.createElement("a",{key:U,href:`https://x.com/${u.substring(1)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",onClick:D=>D.stopPropagation()},u):u});return React.createElement(React.Fragment,{key:g},N,g!==w.length-1&&React.createElement("br",null))})},Ct=React.memo(({bookmark:l,onImageClick:c})=>{let i=l.authorHandle||na(l.url),h=l.authorName||i,g=l.profileImg||(l.url&&l.url.includes("reddit.com")?"https://www.redditstatic.com/avatars/defaults/v2/avatar_default_1.png":"https://abs.twimg.com/sticky/default_profile_images/default_profile_400x400.png"),w=l.mediaUrls?String(l.mediaUrls).split(",").filter(Boolean):[],k=l.mediaType==="video"||w.some(u=>String(u).match(/\.(mp4|webm|ogg|m3u8)/i)),N=l.url&&l.url.includes("reddit.com");return React.createElement("div",{className:"text-left w-full"},React.createElement("div",{className:"flex items-center justify-between mb-3 px-1"},React.createElement("div",{className:"flex items-center gap-3 overflow-hidden pr-2"},React.createElement("img",{src:g,alt:h,className:"w-10 h-10 rounded-full object-cover border border-slate-100 shrink-0"}),React.createElement("div",{className:"flex flex-col overflow-hidden"},React.createElement("span",{className:"font-bold text-slate-900 text-[15px] leading-tight truncate"},h),React.createElement("span",{className:"text-slate-500 text-xs truncate"},i)))),React.createElement("p",{className:"text-slate-800 text-[17px] leading-relaxed whitespace-pre-wrap mb-3 px-1 break-words overflow-hidden"},ca(l.tweetText)),w.length>0&&React.createElement("div",{className:`rounded-2xl overflow-hidden border border-slate-100 bg-transparent ${w.length>1&&!k?"grid grid-cols-2 gap-1 aspect-square md:aspect-video":""}`},k?React.createElement("a",{href:pe(w[0]),target:"_blank",rel:"noopener noreferrer",className:"relative w-full bg-black flex items-center justify-center aspect-video cursor-pointer hover:opacity-90 transition-opacity",onClick:u=>{u.preventDefault(),u.stopPropagation(),c(w,0,"video",l.posterUrl)}},React.createElement("video",{src:w[0],className:"w-full h-full object-cover opacity-70 pointer-events-none",muted:!0,playsInline:!0}),React.createElement("div",{className:"absolute w-12 h-12 bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center z-10 pointer-events-none"},React.createElement(n,{name:"play",className:"text-white text-xl ml-1"}))):w.map((u,U)=>{let L="w-full h-full object-cover cursor-pointer hover:opacity-95 bg-slate-100 transition-all active:scale-[0.98]",D="relative";return w.length===3&&U===0&&(D="row-span-2 h-full"),React.createElement("a",{key:U,href:pe(u),target:"_blank",rel:"noopener noreferrer",className:D,onClick:ee=>{ee.preventDefault(),ee.stopPropagation(),c(w,U,"image")}},React.createElement("img",{src:u,alt:"Media",className:`${L} pointer-events-none`}))})))}),Tt=({value:l,onChange:c,options:i,isMulti:h})=>{let[g,w]=x(!1),k=H(null);T(()=>{let f=p=>{k.current&&!k.current.contains(p.target)&&w(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);let N=[],u=l||"";if(h){let f=(l||"").split(",");f.length>1?(N=f.slice(0,-1).map(p=>p.trim()).filter(Boolean),u=f[f.length-1].trimStart()):(N=[],u=l||"")}let U=f=>{if(h){let p=f.target.value,$=N.length>0?N.join(", ")+", ":"";c($+p)}else c(f.target.value);w(!0)},L=(f,p)=>{f.preventDefault(),f.stopPropagation();let $=N.filter(B=>B!==p),C=$.length>0?$.join(", ")+", ":"";c(C+u)},D=(f,p)=>{if(f.preventDefault(),f.stopPropagation(),h){let $=p.toLowerCase();if(N.includes($)){let C=N.filter(Le=>Le!==$),B=C.length>0?C.join(", ")+", ":"";c(B+u)}else{let C=[...N,$];c(C.join(", ")+", ")}}else c(p),w(!1)},ee=f=>l?h?N.includes(f.toLowerCase()):l.toLowerCase().trim()===f.toLowerCase().trim():!1,ue=h?u.trim().toLowerCase():(l||"").trim().toLowerCase(),fe=(h?!1:i.some(f=>f.name.toLowerCase()===ue))?i:i.filter(f=>f.name.toLowerCase().includes(ue)),W=i.map(f=>({...f}));return React.createElement("div",{className:`tm-input-wrapper ${g?"open":""}`,ref:k},React.createElement("div",{className:`w-full p-1.5 bg-slate-50 border border-slate-100 rounded-xl text-sm focus-within:ring-1 focus-within:ring-black transition-all flex items-center min-h-[46px] ${h?"flex-wrap gap-1.5":""}`,onClick:()=>w(!0)},h&&N.map((f,p)=>{let $=i.find(B=>B.name===f),C=$?$.color:"#cbd5e1";return React.createElement("span",{key:`${f}-${p}`,className:"flex items-center gap-1.5 px-2.5 py-1 bg-white border border-slate-200 shadow-sm rounded-lg text-[13px] font-bold text-slate-700"},React.createElement("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:C}}),f,React.createElement("button",{onClick:B=>L(B,f),className:"ml-0.5 text-slate-400 hover:text-red-500 font-bold focus:outline-none"},React.createElement(n,{name:"x",className:"text-[11px]"})))}),React.createElement("input",{type:"text",value:h?u:l,onChange:U,onFocus:()=>w(!0),placeholder:h?N.length===0?"Etiket ara veya virg\xFClle ay\u0131r...":"":"Klas\xF6r ara veya se\xE7...",className:"flex-1 min-w-[120px] bg-transparent outline-none py-1 px-2"})),React.createElement("div",{className:"tm-dropdown-arrow mr-2"},React.createElement(n,{name:"chevron-down",className:"text-xs"})),React.createElement("div",{className:`tm-dropdown-menu custom-scrollbar ${g?"show":""}`},(g?fe:W).length>0?(g?fe:W).map(f=>{let p=ee(f.name);return React.createElement("div",{key:f.id||f.name,className:`tm-dropdown-item ${p?"selected":""}`,onClick:$=>D($,f.name)},React.createElement("span",{className:"flex items-center gap-2"},React.createElement("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:f.color||"#cbd5e1"}}),h?`#${f.name}`:f.name),React.createElement("div",{className:"tm-dropdown-checkbox"}))}):React.createElement("div",{className:"tm-dropdown-item",style:{color:"#94a3b8",justifyContent:"center"}},"Sonu\xE7 bulunamad\u0131")))},I=new window.Dexie("TweetmarkDB");I.version(1).stores({bookmarks:"id",folders:"id",tags:"id",trash:"id"});var ma={apiKey:"AIzaSyDustCH0f1DYc8kkFG3qLMRrIooVp7s8Sw",authDomain:"bookmark-base.firebaseapp.com",projectId:"bookmark-base",storageBucket:"bookmark-base.firebasestorage.app",messagingSenderId:"760543001497",appId:"1:760543001497:web:e1914fb0ef9b03b52d7108"};firebase.apps.length||firebase.initializeApp(ma);var He=firebase.auth(),z=firebase.firestore();function ua(){let[l,c]=x([]),[i,h]=x([]),[g,w]=x([]),[k,N]=x([]),[u,U]=x(null),[L,D]=x(!1),[ee,ue]=x(!1),[le,fe]=x(null),[W,f]=x(null),[p,$]=x(["All"]),C=(e,t=!1)=>{$(a=>{if(e==="Trash")return["Trash"];if(e==="All"||e==="AllTags")return["All"];if(!t)return[e];let s=a.filter(o=>o!=="Trash"&&o!=="All"&&o!=="AllTags");return s.includes(e)?s=s.filter(o=>o!==e):s.push(e),s.length===0?["All"]:s})},[B,Le]=x(""),[R,St]=x(()=>parseInt(localStorage.getItem("tweetGridCols"))||3),[At,je]=x(!1),[It,q]=x(!1),[Je,Fe]=x(!1),[v,M]=x(null),[S,J]=x(null),[Lt,Ve]=x([]),[G,jt]=x({used:0,quota:0});T(()=>{try{let t=JSON.stringify({bookmarks:l,customFolders:i,customTags:g,trash:k}),a=new Blob([t]).size;jt({used:a,quota:100*1024*1024})}catch(e){console.error("Failed to calculate archive size:",e)}},[l,i,g,k]),T(()=>{let e=He.onAuthStateChanged(t=>{U(t)});return()=>e()},[]);let $e=H(null),Ee=H(!1),qe=H(Promise.resolve()),re=H(null);T(()=>{u&&L&&$e.current!==u.uid?($e.current=u.uid,$t(u.uid)):u||($e.current=null)},[u,L]);let Ye=async()=>{let e=new firebase.auth.GoogleAuthProvider;try{await He.signInWithPopup(e),A("Logged in successfully!","success")}catch(t){console.error("Login Error:",t),A("Login failed. Check browser popup settings.","error")}},Qe=()=>{He.signOut(),A("Logged out.","info")},Ft=(e,t)=>{if(e===t)return!0;if(!e||!t)return!1;let a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let o of a)if(e[o]!==t[o])if(Array.isArray(e[o])&&Array.isArray(t[o])){if(e[o].length!==t[o].length)return!1;for(let r=0;r<e[o].length;r++)if(e[o][r]!==t[o][r])return!1}else return!1;return!0},$t=async e=>{if(L){ue(!0);try{let t=await z.collection("users").doc(e).collection("meta").doc("state").get(),a=0,s=!1,o=!1,r=null;if(t.exists){let d=t.data();a=typeof d.lastUpdated=="number"?d.lastUpdated:d.lastUpdated?.toMillis?.()||0,s=d.schemaVersion>=2}else{let d=await z.collection("users").doc(e).get();d.exists&&(r=d.data(),a=typeof r.lastUpdated=="number"?r.lastUpdated:r.lastUpdated?.toMillis?.()||0,o=!0)}let m=parseInt(localStorage.getItem("tweetLastLocalUpdate"))||0;if(o||a>m+2e3||l.length===0&&i.length===0&&g.length===0){Ee.current=!0;let d={bookmarks:[],folders:[],tags:[],trash:[]};if(o)A("Upgrading data sync. Do not close...","info"),d.bookmarks=r.bookmarks||[],d.folders=r.folders||[],d.tags=r.tags||[],d.trash=r.trash||[],re.current=null,await De(e,!0,d),A("Upgraded to new Cloud Sync Architecture.","success");else if(s){let[y,b,j,P]=await Promise.all([z.collection("users").doc(e).collection("bookmarks").get(),z.collection("users").doc(e).collection("folders").get(),z.collection("users").doc(e).collection("tags").get(),z.collection("users").doc(e).collection("trash").get()]);d.bookmarks=y.empty?[]:y.docs.map(O=>O.data()),d.folders=b.empty?[]:b.docs.map(O=>O.data()),d.tags=j.empty?[]:j.docs.map(O=>O.data()),d.trash=P.empty?[]:P.docs.map(O=>O.data())}c(d.bookmarks),h(d.folders),w(d.tags),N(d.trash),re.current=d,localStorage.setItem("tweetLastLocalUpdate",a.toString()),A("Cloud sync complete!","success"),requestAnimationFrame(()=>{requestAnimationFrame(()=>{Ee.current=!1})})}else m>a+2e3?(re.current=null,await De(e,!0)):re.current={bookmarks:l,folders:i,tags:g,trash:k}}catch(t){console.error("Cloud Load Error:",t),A("Cloud load failed. Please check your connection.","error")}finally{ue(!1)}}},De=async(e,t=!1,a=null)=>{if(!e||!L)return;let s=a?a.bookmarks:l,o=a?a.folders:i,r=a?a.tags:g,m=a?a.trash:k;if(!t&&s.length===0&&o.length===0&&r.length===0)return;let d=async()=>{try{let b=re.current,j=z.batch(),P=0,O=async()=>{if(P>0){try{await j.commit()}catch(_){throw console.error("Batch commit failed:",_),_}j=z.batch(),P=0}},Ae=async(_,xt,gt)=>{if(!gt){for(let F of xt){let se=F.id||F.name;if(se==null)continue;let Ie=String(se),Ge=z.collection("users").doc(e).collection(_).doc(Ie);j.set(Ge,F),P++,P>=490&&await O()}return}let bt=new Map((gt||[]).map(F=>[String(F.id||F.name),F])),ht=new Map((xt||[]).map(F=>[String(F.id||F.name),F]));for(let[F,se]of ht.entries()){if(F==="undefined"||F==="null")continue;let Ie=bt.get(F);if(!Ie||!Ft(Ie,se)){let Ge=z.collection("users").doc(e).collection(_).doc(F);j.set(Ge,se),P++,P>=490&&await O()}}for(let F of bt.keys())if(!ht.has(F)){let se=z.collection("users").doc(e).collection(_).doc(F);j.delete(se),P++,P>=490&&await O()}};if(await Ae("bookmarks",s,b?.bookmarks),await Ae("folders",o,b?.folders),await Ae("tags",r,b?.tags),await Ae("trash",m,b?.trash),await O(),await z.collection("users").doc(e).collection("meta").doc("state").set({lastUpdated:firebase.firestore.FieldValue.serverTimestamp(),schemaVersion:2}),t&&!b)try{let _=await z.collection("users").doc(e).get();_.exists&&_.data().bookmarks&&await z.collection("users").doc(e).update({bookmarks:firebase.firestore.FieldValue.delete(),folders:firebase.firestore.FieldValue.delete(),tags:firebase.firestore.FieldValue.delete(),trash:firebase.firestore.FieldValue.delete()})}catch(_){console.warn("Failed to clean up old root doc fields.",_)}localStorage.setItem("tweetLastLocalUpdate",Date.now().toString()),re.current={bookmarks:s,folders:o,tags:r,trash:m}}catch(b){throw console.error("Cloud Sync Error:",b),t&&A("Failed to save to cloud. Will retry later.","error"),b}},y=qe.current.then(d);return qe.current=y.catch(b=>{console.error("Queue boundary recovered from error",b)}),y},[xe,ne]=x(null),ie=H(null),[ze,Et]=x(""),[Pe,Ke]=x(20),Ue=H(null),Dt=React.useCallback((e,t,a,s)=>{J({medias:e,currentIndex:t,mediaType:a,poster:s})},[]),[zt,te]=x(!1),[Y,ge]=x(null),[Ze,be]=x(""),[he,ve]=x("#3b82f6"),[Pt,ae]=x(!1),[Q,we]=x(null),[Xe,ye]=x(""),[Ne,ke]=x("#64748b"),[de,Oe]=x(!0),[Ut,Ce]=x(!1),[Be,et]=x(""),[tt,at]=x(""),[st,ot]=x(""),[lt,rt]=x(""),[Ot,Te]=x(!1),[E,Se]=x(()=>localStorage.getItem("tweetAccentColor")||"#000000"),[K,Bt]=x(()=>localStorage.getItem("tweetTheme")||"light"),[pa,fa]=x(window.innerWidth),[Z,Rt]=x(()=>localStorage.getItem("tweetAutoBackup")==="true"),[Mt,_t]=x(()=>parseInt(localStorage.getItem("tweetLastBackup"))||0),[X,Wt]=x(()=>localStorage.getItem("tweetShowBrandLines")!=="false"),[ce,nt]=x(()=>localStorage.getItem("tweetBrandLineStyle")||"bar");T(()=>{localStorage.setItem("tweetShowBrandLines",X)},[X]),T(()=>{localStorage.setItem("tweetBrandLineStyle",ce)},[ce]),T(()=>{localStorage.setItem("tweetTheme",K)},[K]),T(()=>{localStorage.setItem("tweetAutoBackup",Z)},[Z]),T(()=>{if(!Z||!L)return;let e=Date.now(),t=1440*60*1e3;if(e-Mt>t){let a=setTimeout(()=>{Me(!0);let s=Date.now();_t(s),localStorage.setItem("tweetLastBackup",s),A("Automatic backup completed","success")},5e3);return()=>clearTimeout(a)}},[Z,L,l.length]);let[it,Re]=x([]),Gt=H(0),A=vt((e,t="info",a=null,s=4e3)=>{let o=++Gt.current;return Re(r=>[...r,{id:o,message:e,type:t,undoAction:a}]),setTimeout(()=>Re(r=>r.filter(m=>m.id!==o)),s),o},[]),dt=vt(e=>Re(t=>t.filter(a=>a.id!==e)),[]);T(()=>{(async()=>{try{let t=await I.bookmarks.count(),a=await I.folders.count(),s=await I.tags.count();if(t===0&&a===0&&s===0){let o=b=>{try{let j=localStorage.getItem(b);return j?JSON.parse(j):[]}catch{return[]}},r=o("tweetBookmarks_v1"),m=o("tweetFolders_v2"),d=o("tweetTags_v1"),y=o("tweetTrash_v1");c(r),h(m),w(d),N(y)}else{let o=await I.bookmarks.toArray(),r=await I.folders.toArray(),m=await I.tags.toArray(),d=await I.trash.toArray();c(o),h(r),w(m),N(d)}}catch(t){console.error("Dexie Load Error",t)}finally{D(!0)}})()},[]),T(()=>{let e=(t,a,s)=>(t.type==="GET_APP_DATA"&&s({folders:i,tags:g}),!0);return window.chrome&&chrome.runtime&&chrome.runtime.onMessageExternal&&chrome.runtime.onMessageExternal.addListener(e),()=>{window.chrome&&chrome.runtime&&chrome.runtime.onMessageExternal&&chrome.runtime.onMessageExternal.removeListener(e)}},[i,g]),T(()=>{let e=()=>{if(L)try{let t=localStorage.getItem("pending_twitter_sync");if(t){let s=JSON.parse(t);s&&s.length>0&&(c(o=>{let r=new Set(o.map(d=>d.tweetId)),m=s.filter(d=>!r.has(String(d.tweetId)));return m.length>0?[...m,...o]:o}),localStorage.removeItem("pending_twitter_sync"))}let a=localStorage.getItem("pending_twitter_updates");if(a){let s=JSON.parse(a);if(s&&s.length>0){c(r=>{let m=[...r];return s.forEach(d=>{let y=m.findIndex(b=>b.tweetId===String(d.tweetId));y!==-1&&(m[y]={...m[y],folder:d.folder,tags:d.tags,description:d.note})}),m});let o=s.flatMap(r=>r.tags||[]);o.length>0&&w(r=>{let m=[...r],d=!1;return o.forEach(y=>{y&&!m.some(b=>b.name===y)&&(m.push({id:"t_"+Math.random().toString(36).substr(2,9),name:y,color:yt()}),d=!0)}),d?m:r}),localStorage.removeItem("pending_twitter_updates")}}}catch(t){console.error("Sync error:",t)}};return e(),window.addEventListener("twitter-bookmarks-synced",e),()=>window.removeEventListener("twitter-bookmarks-synced",e)},[L]),T(()=>{if(!L)return;let e=setTimeout(()=>{(async()=>{try{await I.transaction("rw",I.bookmarks,I.folders,I.tags,I.trash,async()=>{let a=async(s,o)=>{let r=new Set(await s.toCollection().primaryKeys()),m=new Set(o.map(y=>y.id)),d=[...r].filter(y=>!m.has(y));d.length&&await s.bulkDelete(d),o.length&&await s.bulkPut(o)};await a(I.bookmarks,l),await a(I.folders,i),await a(I.tags,g),await a(I.trash,k)}),u&&L&&!Ee.current&&De(u.uid),window.dispatchEvent(new CustomEvent("tweetmark-data-changed"))}catch(a){console.error("Dexie sync error:",a)}})()},3e3);return()=>clearTimeout(e)},[l,i,g,k,L,u]),T(()=>{localStorage.setItem("tweetGridCols",R.toString()),localStorage.setItem("tweetAccentColor",E)},[R,E]),T(()=>{let e=setTimeout(()=>{Et(B)},300);return()=>clearTimeout(e)},[B]),T(()=>{Ke(20)},[p,ze,R]),T(()=>{let e=new IntersectionObserver(t=>{t[0].isIntersecting&&Ke(a=>a+20)},{threshold:.1});return Ue.current&&e.observe(Ue.current),()=>e.disconnect()},[]),T(()=>{if(!window.twttr){let e=document.createElement("script");e.src="https://platform.twitter.com/widgets.js",e.async=!0,document.body.appendChild(e)}},[]),T(()=>{S&&S.medias&&S.mediaType!=="video"&&S.medias.forEach(e=>{let t=new Image;t.src=pe(e)})},[S?.medias]),T(()=>{let e=t=>{t.target.closest(".dropdown-container")||f(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let Me=(e=!1)=>{try{let t={bookmarks:l,customFolders:i,customTags:g,trash:k,exportDate:new Date().toISOString(),version:"2.0"},a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),o=document.createElement("a");o.href=s;let r=new Date().toLocaleDateString().replace(/\//g,"-");o.download=e?`bookmark_base_auto_backup_${r}.json`:`bookmark_base_manual_backup_${r}.json`,o.click(),setTimeout(()=>URL.revokeObjectURL(s),100)}catch(t){console.error("Backup failed:",t),A("Backup failed. Check console for details.","error")}},Ht=e=>{let t=e.target.files[0];if(!t)return;if(t.size+G.used>=100*1024*1024){A("Archive Limit (100 MB) reached. Please delete some items first.","error"),e.target.value=null;return}let a=new FileReader;a.onload=s=>{try{let o=JSON.parse(s.target.result),r=!0;if(o.bookmarks&&!Array.isArray(o.bookmarks)&&(r=!1),o.customFolders&&!Array.isArray(o.customFolders)&&(r=!1),o.customTags&&!Array.isArray(o.customTags)&&(r=!1),o.trash&&!Array.isArray(o.trash)&&(r=!1),o.bookmarks&&r&&o.bookmarks.some(d=>typeof d!="object"||!d.id||!d.tweetId)&&(r=!1),!r){A("Invalid or corrupted JSON file. Operation cancelled.","error");return}o.bookmarks&&Array.isArray(o.bookmarks)&&c(o.bookmarks),o.customFolders&&Array.isArray(o.customFolders)&&h(o.customFolders),o.customTags&&Array.isArray(o.customTags)&&w(o.customTags),o.trash&&Array.isArray(o.trash)&&N(o.trash),A("Backup loaded successfully!","success")}catch(o){A("JSON parse error! Make sure the file is not corrupted.","error"),console.error("Import JSON Error:",o)}},a.readAsText(t)},Jt=e=>{if(e.preventDefault(),G.used>=100*1024*1024)return A("Archive Limit Reached (100 MB). Please delete items to free up space.","error");let t=ra(Be);if(!t)return A("Please enter a valid Twitter or Reddit link.","error");let a=st.split(",").map(b=>b.trim().toLowerCase()).filter(Boolean),s=[...g],o=!1;a.forEach(b=>{s.some(j=>j.name===b)||(s.push({id:"t_"+Math.random().toString(36).substr(2,9),name:b,color:yt()}),o=!0)}),o&&w(s);let r=new Date,m=r.toLocaleDateString("tr-TR"),d=r.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),y={id:Date.now().toString(),tweetId:t,url:la(Be),folder:tt.trim()||"General",tags:a,description:lt.trim(),date:`${m} ${d}`,timestamp:r.getTime()};c([y,...l]),je(!1),et(""),at(""),ot(""),rt("")},ct=(e,t)=>{e&&e.stopPropagation();let a=l.find(s=>s.id===t);a&&(N(s=>[{...a,deletedAt:Date.now()},...s]),c(s=>s.filter(o=>o.id!==t)),v&&v.id===t&&M(null),A("Moved to trash","info",()=>{N(s=>s.filter(o=>o.id!==t)),c(s=>[a,...s])}))},Vt=(e,t)=>{e.stopPropagation();let a=k.find(s=>s.id===t);if(a){let{deletedAt:s,...o}=a;c(r=>[o,...r]),N(r=>r.filter(m=>m.id!==t))}},qt=(e,t)=>{e.stopPropagation();let a=k.find(s=>s.id===t);N(s=>s.filter(o=>o.id!==t)),A("Permanently deleted","info",()=>{a&&N(s=>[a,...s])})},Yt=()=>{if(k.length===0)return;let e=[...k];N([]),A(`${e.length} item(s) permanently deleted`,"info",()=>{N(e)})};T(()=>{if(k.length===0)return;let e=Date.now()-720*60*60*1e3,t=k.filter(a=>a.deletedAt&&a.deletedAt<e);t.length>0&&(N(a=>a.filter(s=>!s.deletedAt||s.deletedAt>=e)),console.log(`Auto-cleaned ${t.length} expired trash item(s)`))},[k.length]);let Qt=e=>{e.preventDefault();let t=Ze.trim();if(t){if(!Y&&i.some(a=>a.name.toLowerCase()===t.toLowerCase())){A("Folder already exists!","error");return}Y?(h(i.map(a=>a.id===Y.id?{...a,name:t,color:he}:a)),c(l.map(a=>a.folder===Y.name?{...a,folder:t}:a))):h([...i,{id:"f_"+Date.now(),name:t,color:he,parentId:null,isPinned:!1}]),te(!1),ge(null)}},Kt=e=>{e.preventDefault();let t=Xe.trim().toLowerCase();if(t){if(!Q&&g.some(a=>a.name.toLowerCase()===t.toLowerCase())){A("Tag already exists!","error");return}Q?(w(g.map(a=>a.id===Q.id?{...a,name:t,color:Ne}:a)),c(l.map(a=>({...a,tags:(a.tags||[]).map(s=>s===Q.name?t:s)})))):w([...g,{id:"t_"+Date.now(),name:t,color:Ne}]),ae(!1),we(null)}},mt=(e,t)=>{let a=[t.find(s=>s.id===e).name];return t.filter(s=>s.parentId===e).forEach(s=>{a=a.concat(mt(s.id,t))}),a.filter(Boolean)},xa=e=>{if(C(e||"Unsorted"),!e||e==="Unsorted"||e==="General"||e==="Genel")return;let a=i.find(r=>r.name===e);if(!a)return;let s=[],o=a.parentId;for(;o;)s.push(o),o=i.find(m=>m.id===o)?.parentId||null;s.length>0&&Ve(r=>[...new Set([...r,...s])])},ga=e=>{C(`tag:${e}`),Oe(!0)},Zt=oe(()=>i.filter(e=>!e.parentId),[i]),Xt=oe(()=>{let e={};l.forEach(r=>{let m=r.folder||"General";e[m]=(e[m]||0)+1});let t={},a={};i.forEach(r=>{a[r.id]=r,t[r.id]=[]}),i.forEach(r=>{r.parentId&&t[r.parentId]&&t[r.parentId].push(r.id)});let s={},o=r=>{if(s[r]!==void 0)return s[r];let m=a[r];if(!m)return 0;let d=e[m.name]||0;return t[r]&&t[r].forEach(y=>{d+=o(y)}),s[r]=d,d};return i.forEach(r=>{s[r.id]=o(r.id)}),s},[l,i]),V=oe(()=>{let e={};return l.forEach(t=>{(t.tags||[]).forEach(a=>{e[a]=(e[a]||0)+1})}),e},[l]),ea=e=>Xt[e]||0,ut=oe(()=>l.filter(e=>!e.folder||e.folder==="General"||e.folder==="Genel").length,[l]),me=oe(()=>{let e=p.includes("Trash")?k:l,t=p.filter(o=>o.startsWith("tag:")),a=p.filter(o=>!o.startsWith("tag:"));return e.filter(o=>{let r=t.every(b=>{let j=b.split(":")[1];return(o.tags||[]).includes(j)}),m=a.length===0||a.some(b=>{if(b==="All"||b==="AllTags"||b==="Trash")return!0;if(b==="Unsorted")return!o.folder||o.folder==="General"||o.folder==="Genel";let j=i.find(P=>P.name===b);return j?mt(j.id,i).includes(o.folder):o.folder===b}),d=r&&m,y=ze.toLowerCase();return d&&(!y||(o.tags||[]).some(b=>b.includes(y))||(o.description||"").toLowerCase().includes(y)||(o.tweetText||"").toLowerCase().includes(y)||(o.authorName||"").toLowerCase().includes(y))}).sort((o,r)=>{let m=o.timestamp||parseInt(o.id)||0;return(r.timestamp||parseInt(r.id)||0)-m})},[l,k,p,ze,i]),pt=(e,t)=>{let a=i.filter(s=>s.parentId===t);for(let s of a)if(s.id===e||pt(e,s.id))return!0;return!1},_e=({folder:e,depth:t=0})=>{let a=i.filter(m=>m.parentId===e.id),s=Lt.includes(e.id),o=p.includes(e.name),r=xe===e.id;return React.createElement("div",{className:"w-full"},React.createElement("div",{draggable:!0,onDragStart:m=>{m.stopPropagation(),ie.current={type:"folder",id:e.id}},onDragOver:m=>{m.preventDefault(),m.stopPropagation(),ne(e.id)},onDragLeave:m=>{m.stopPropagation(),xe===e.id&&ne(null)},onDrop:m=>{m.preventDefault(),m.stopPropagation(),ne(null);let d=ie.current;if(d){if(d.type==="folder"){if(d.id===e.id||pt(e.id,d.id))return;h(y=>y.map(b=>b.id===d.id?{...b,parentId:e.id}:b))}else d.type==="tweet"&&c(y=>y.map(b=>d.ids.includes(b.id)?{...b,folder:e.name}:b));ie.current=null}},className:`group flex items-center rounded-xl transition-all cursor-pointer mx-1 ${o?"text-white shadow-sm":"text-slate-600 hover:bg-slate-100"} ${r?"ring-2 ring-blue-400 ring-inset bg-blue-50/70":""}`,style:{marginLeft:`${t*1+.25}rem`,padding:"0.15rem 0",...o&&!r?{backgroundColor:E}:{}}},React.createElement("button",{onClick:m=>{m.stopPropagation(),Ve(d=>d.includes(e.id)?d.filter(y=>y!==e.id):[...d,e.id])},className:`w-5 h-5 ml-1 flex items-center justify-center ${a.length===0?"invisible":""}`},React.createElement(n,{name:s?"chevron-down":"chevron-right",size:12})),React.createElement("button",{onClick:()=>C(e.name),className:"flex-1 flex items-center gap-2.5 text-[15px] font-bold truncate py-1.5 pl-1 text-left"},React.createElement(n,{name:"folder",className:"text-[14px]",style:{color:o?"#fff":e.color}})," ",React.createElement("span",null,e.name)),React.createElement("div",{className:"flex items-center w-8 justify-center pr-2 shrink-0"},React.createElement("span",{className:"text-[11px] font-black opacity-60 group-hover:hidden"},ea(e.id)),React.createElement("button",{onClick:m=>{m.stopPropagation(),ge(e),be(e.name),ve(e.color),te(!0)},className:"hidden group-hover:block text-slate-400 hover:text-blue-500"},React.createElement(n,{name:"pen",className:"text-[11px]"})))),s&&a.map(m=>React.createElement(_e,{key:m.id,folder:m,depth:t+1})))},[ft,ta]=x(window.innerWidth);T(()=>{let e=()=>ta(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let We=oe(()=>{let e=ft||window.innerWidth;return e<640?1:e<1024?Math.min(2,R||1):e<1280?Math.min(3,R||1):e<1536?Math.min(4,R||1):R||1},[ft,R]),aa=oe(()=>{let e=Array.from({length:We},()=>[]);return me&&Array.isArray(me)&&me.slice(0,Pe).forEach((t,a)=>{e[a%We].push(t)}),e},[me,Pe,We]),sa={1:{padding:"max-w-3xl"},2:{padding:"max-w-5xl"},3:{padding:"max-w-6xl"},4:{padding:"max-w-[90rem]"},5:{padding:"max-w-[120rem]"}}[R]||{padding:"max-w-6xl"};return L?React.createElement("div",{className:`flex h-screen w-full bg-slate-50 text-slate-800 font-sans overflow-hidden theme-${K}`},It&&React.createElement("div",{className:"fixed inset-0 z-[80] sm:hidden"},React.createElement("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:()=>q(!1)}),React.createElement("aside",{className:"relative w-72 h-full bg-white shadow-2xl flex flex-col animate-slide-in-left"},React.createElement("div",{className:"p-5 flex items-center justify-between border-b border-slate-50"},React.createElement("div",{className:"flex items-center gap-[5px]"},React.createElement(n,{name:"bookmark",className:"shrink-0 -translate-y-[1px]",style:{color:K==="dark"?"#fff":"#000"},size:45,strokeWidth:2.5}),React.createElement("div",{className:"flex flex-col items-start"},React.createElement("h1",{className:"text-[28px] tracking-wide leading-[0.85] mb-1 whitespace-nowrap",style:{fontFamily:'"Londrina Solid", sans-serif',fontWeight:900,letterSpacing:"0.5px"}},"Bookmark Base"),React.createElement("span",{className:"text-[15px] text-slate-500 leading-none",style:{fontFamily:'"Londrina Solid", sans-serif',fontWeight:400,letterSpacing:"0.2px"}},"Save Your Feed"))),React.createElement("button",{onClick:()=>q(!1),className:"w-8 h-8 flex items-center justify-center hover:bg-slate-100 rounded-full"},React.createElement(n,{name:"x",className:"text-slate-400"}))),React.createElement("div",{className:"flex-1 overflow-y-auto py-6 px-5 space-y-6 custom-scrollbar"},React.createElement("div",{className:"space-y-0"},React.createElement("div",{onClick:()=>{C("All"),q(!1)},className:`mx-1 flex items-center rounded-xl transition-all cursor-pointer ${p.includes("All")?"text-white shadow-sm":"text-slate-600 hover:bg-slate-100"}`,style:p.includes("All")?{backgroundColor:E}:{}},React.createElement("button",{className:"flex-1 flex items-center gap-3 px-3 py-2 text-[15px] font-bold text-left"},React.createElement(n,{name:"layers",size:18})," All Bookmarks"),React.createElement("div",{className:"flex items-center w-8 justify-center pr-2 shrink-0"},React.createElement("span",{className:"text-[11px] font-black opacity-60"},l.length))),React.createElement("div",{onClick:()=>{C("Unsorted"),q(!1)},className:`mx-1 flex items-center rounded-xl transition-all cursor-pointer ${p.includes("Unsorted")?"text-white shadow-sm":"text-slate-600 hover:bg-slate-100"}`,style:p.includes("Unsorted")?{backgroundColor:E}:{}},React.createElement("button",{className:"flex-1 flex items-center gap-3 px-3 py-2 text-[15px] font-bold text-left"},React.createElement(n,{name:"inbox",size:18})," Unsorted"),React.createElement("div",{className:"flex items-center w-8 justify-center pr-2 shrink-0"},React.createElement("span",{className:"text-[11px] font-black opacity-60"},ut)))),React.createElement("div",null,React.createElement("div",{className:"flex justify-between items-center mb-3 px-2"},React.createElement("h2",{className:"text-xs font-bold text-slate-600 uppercase tracking-wider"},"Folders"),React.createElement("button",{onClick:e=>{e.stopPropagation(),ge(null),be(""),ve("#3b82f6"),te(!0)},className:"w-6 h-6 bg-slate-100 rounded-lg flex items-center justify-center hover:text-black"},React.createElement(n,{name:"plus",size:12}))),React.createElement("div",{className:"space-y-0"},i.filter(e=>!e.parentId).map(e=>React.createElement(_e,{key:e.id,folder:e})))),React.createElement("div",null,React.createElement("div",{className:"group flex justify-between items-center mb-3 px-2 cursor-pointer tag-header transition-all py-1",onClick:()=>Oe(!de)},React.createElement("h2",{className:"text-xs font-bold text-slate-600 uppercase tracking-wider flex items-center gap-2"},React.createElement(n,{name:de?"chevron-down":"chevron-right",size:10})," Tags"),React.createElement("div",{className:"flex items-center gap-1.5"},React.createElement("button",{onClick:e=>{e.stopPropagation(),we(null),ye(""),ke("#64748b"),ae(!0)},className:"w-6 h-6 bg-slate-100 rounded-lg flex items-center justify-center hover:text-black"},React.createElement(n,{name:"plus",size:12})))),de&&React.createElement("div",{className:"flex flex-wrap gap-1.5 px-2 mt-1"},[...g].sort((e,t)=>(V[t.name]||0)-(V[e.name]||0)).map(e=>{let t=p.includes(`tag:${e.name}`);return React.createElement("div",{key:e.id,onClick:()=>{C(`tag:${e.name}`),q(!1)},className:`h-7 flex items-center cursor-pointer rounded-lg transition-all px-2.5 border ${t?"text-white shadow-sm border-transparent":"text-slate-500 bg-slate-50 border-slate-100 hover:bg-slate-100"}`,style:t?{backgroundColor:E}:{}},React.createElement("span",{className:"font-black mr-1.5 text-[11px] flex items-center",style:{color:t?"#fff":e.color}},"#"),React.createElement("span",{className:"text-[13px] font-bold flex items-center"},e.name),React.createElement("span",{className:`ml-2 text-[10px] font-black flex items-center h-full pt-[1px] ${t?"opacity-70":"opacity-30"}`},V[e.name]||0))})))),React.createElement("div",{className:"p-4 border-t border-slate-100 space-y-3"},React.createElement("div",{className:`p-3 rounded-2xl border transition-all ${u?"bg-blue-50/50 border-blue-100":"bg-slate-50 border-slate-100"}`},u?React.createElement("div",{className:"flex items-center gap-3"},u.photoURL&&React.createElement("img",{src:u.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-white shadow-sm"}),React.createElement("div",{className:"flex-1 min-w-0"},React.createElement("p",{className:"text-[13px] font-bold text-slate-800 truncate"},u.displayName||"User"),React.createElement("p",{className:"text-[10px] font-bold text-blue-500 uppercase tracking-widest leading-none"},ee?"Syncing...":"Online")),React.createElement("button",{onClick:Qe,className:"text-slate-400 hover:text-red-500 transition-colors",title:"Logout"},React.createElement(n,{name:"log-out",size:14}))):React.createElement("button",{onClick:Ye,className:"w-full flex items-center justify-center gap-2 py-2 text-[13px] font-bold text-blue-600 hover:text-blue-700 transition-colors"},React.createElement(n,{name:"cloud",size:16})," Cloud Login")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>{C("Trash"),q(!1)},className:`flex-1 flex items-center gap-2 px-3 py-2 text-[13px] font-bold rounded-xl ${p.includes("Trash")?"bg-red-50 text-red-500":"text-slate-400 hover:bg-slate-50"}`},React.createElement(n,{name:"trash-2",size:18})," Trash"),React.createElement("button",{onClick:()=>{Te(!0),q(!1)},className:"w-9 h-9 flex items-center justify-center text-slate-400 hover:bg-slate-100 rounded-xl"},React.createElement(n,{name:"settings",size:18})))))),React.createElement("aside",{className:"w-72 bg-white border-r border-slate-200 flex flex-col shrink-0 shadow-sm hidden sm:flex"},React.createElement("div",{className:"p-6 flex items-center gap-[5px] border-b border-slate-50"},React.createElement(n,{name:"bookmark",className:"shrink-0 -translate-y-[1px]",style:{color:K==="dark"?"#fff":"#000"},size:45,strokeWidth:2.5}),React.createElement("div",{className:"flex flex-col items-start"},React.createElement("h1",{className:"text-[28px] tracking-wide leading-[0.85] mb-1 whitespace-nowrap",style:{fontFamily:'"Londrina Solid", sans-serif',fontWeight:900,letterSpacing:"0.5px"}},"Bookmark Base"),React.createElement("span",{className:"text-[15px] text-slate-500 leading-none",style:{fontFamily:'"Londrina Solid", sans-serif',fontWeight:400,letterSpacing:"0.2px"}},"Save Your Feed"))),React.createElement("div",{className:"flex-1 overflow-y-auto py-6 px-5 space-y-6 custom-scrollbar"},React.createElement("div",{className:"space-y-0"},React.createElement("div",{onClick:()=>C("All"),className:`mx-1 flex items-center rounded-xl transition-all cursor-pointer ${p.includes("All")?"text-white shadow-sm":"text-slate-600 hover:bg-slate-100"}`,style:p.includes("All")?{backgroundColor:E}:{}},React.createElement("button",{className:"flex-1 flex items-center gap-3 px-3 py-2 text-[15px] font-bold text-left"},React.createElement(n,{name:"layers",size:18})," All Bookmarks"),React.createElement("div",{className:"flex items-center w-8 justify-center pr-2 shrink-0"},React.createElement("span",{className:"text-[11px] font-black opacity-60"},l.length))),React.createElement("div",{onClick:()=>C("Unsorted"),className:`mx-1 flex items-center rounded-xl transition-all cursor-pointer ${p.includes("Unsorted")?"text-white shadow-sm":"text-slate-600 hover:bg-slate-100"}`,style:p.includes("Unsorted")?{backgroundColor:E}:{}},React.createElement("button",{className:"flex-1 flex items-center gap-3 px-3 py-2 text-[15px] font-bold text-left"},React.createElement(n,{name:"inbox",size:18})," Unsorted"),React.createElement("div",{className:"flex items-center w-8 justify-center pr-2 shrink-0"},React.createElement("span",{className:"text-[11px] font-black opacity-60"},ut)))),React.createElement("div",null,React.createElement("div",{className:`flex justify-between items-center mb-2 px-2 rounded-lg transition-all ${xe==="root"?"bg-blue-50 ring-2 ring-blue-400 ring-dashed py-1":""}`,onDragOver:e=>{e.preventDefault(),ne("root")},onDragLeave:()=>{xe==="root"&&ne(null)},onDrop:e=>{e.preventDefault(),ne(null);let t=ie.current;t&&(t.type==="folder"&&h(a=>a.map(s=>s.id===t.id?{...s,parentId:null}:s)),ie.current=null)}},React.createElement("h2",{className:"text-xs font-bold text-slate-600 uppercase tracking-wider"},"Folders"),React.createElement("button",{onClick:()=>{ge(null),be(""),ve("#3b82f6"),te(!0)},className:"w-6 h-6 bg-slate-100 rounded-lg flex items-center justify-center hover:text-black"},React.createElement(n,{name:"plus",size:12}))),React.createElement("div",{className:"space-y-0"},Zt.map(e=>React.createElement(_e,{key:e.id,folder:e})))),React.createElement("div",null,React.createElement("div",{className:"group flex justify-between items-center mb-3 px-2 cursor-pointer tag-header transition-all py-1",onClick:()=>Oe(!de)},React.createElement("h2",{className:"text-xs font-bold text-slate-600 uppercase tracking-wider flex items-center gap-2"},React.createElement(n,{name:de?"chevron-down":"chevron-right",size:10})," Tags"),React.createElement("div",{className:"flex items-center gap-1.5"},React.createElement("button",{onClick:e=>{e.stopPropagation(),we(null),ye(""),ke("#64748b"),ae(!0)},className:"w-6 h-6 bg-slate-100 rounded-lg flex items-center justify-center hover:text-black"},React.createElement(n,{name:"plus",size:12})))),de&&React.createElement("div",{className:"flex flex-wrap gap-1.5 px-2 mt-1"},g.length>0?[...g].sort((e,t)=>(V[t.name]||0)-(V[e.name]||0)).map(e=>{let t=p.includes(`tag:${e.name}`);return React.createElement("div",{key:e.id,onClick:()=>C(`tag:${e.name}`),className:`group h-8 flex items-center rounded-lg transition-all cursor-pointer px-3 py-0.5 border ${t?"text-white shadow-sm border-transparent":"text-slate-600 bg-slate-50 border-slate-100 hover:border-slate-200 hover:bg-slate-100"}`,style:t?{backgroundColor:E}:{}},React.createElement("span",{className:"font-black text-[12px] mr-1.5 shrink-0 flex items-center",style:{color:t?"#fff":e.color}},"#"),React.createElement("span",{className:"text-[14px] font-bold truncate max-w-[140px] flex items-center"},e.name),React.createElement("div",{className:"flex items-center justify-center ml-2 min-w-[14px] h-full"},React.createElement("span",{className:`text-[11px] font-black flex items-center pt-[1px] group-hover:hidden ${t?"opacity-70":"opacity-30"}`},V[e.name]||0),React.createElement("button",{onClick:a=>{a.stopPropagation(),we(e),ye(e.name),ke(e.color),ae(!0)},className:`hidden group-hover:flex items-center hover:text-blue-500 ${t?"text-white":"text-slate-400"}`},React.createElement(n,{name:"pen",size:11}))))}):React.createElement("div",{className:"px-3 py-2 text-[11px] text-slate-400 italic"},"No tags yet")))),React.createElement("div",{className:"p-4 border-t border-slate-100 space-y-3"},React.createElement("div",{className:`p-3 rounded-2xl border transition-all ${u?"bg-blue-50/50 border-blue-100":"bg-slate-50 border-slate-100"}`},u?React.createElement("div",{className:"flex items-center gap-3"},u.photoURL&&React.createElement("img",{src:u.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-white shadow-sm"}),React.createElement("div",{className:"flex-1 min-w-0"},React.createElement("p",{className:"text-[13px] font-bold text-slate-800 truncate"},u.displayName||"User"),React.createElement("p",{className:"text-[10px] font-bold text-blue-500 uppercase tracking-widest leading-none"},ee?"Syncing...":"Online")),React.createElement("button",{onClick:Qe,className:"text-slate-400 hover:text-red-500 transition-colors",title:"Logout"},React.createElement(n,{name:"log-out",size:14}))):React.createElement("button",{onClick:Ye,className:"w-full flex items-center justify-center gap-2 py-2 text-[13px] font-bold text-blue-600 hover:text-blue-700 transition-colors"},React.createElement(n,{name:"cloud",size:16})," Cloud Sync Login")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:Me,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl text-[12px] font-bold text-slate-500 bg-slate-50 hover:bg-slate-100 transition-all"},React.createElement(n,{name:"download",className:"text-[14px]"})," Save"),React.createElement("label",{className:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl text-[12px] font-bold text-slate-500 bg-slate-50 hover:bg-slate-100 transition-all cursor-pointer"},React.createElement(n,{name:"upload",className:"text-[14px]"})," Load",React.createElement("input",{type:"file",accept:".json",className:"hidden",onChange:Ht}))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:()=>C("Trash"),className:`flex-1 flex items-center gap-3 px-3 py-2 rounded-xl text-[15px] font-medium transition-all ${p.includes("Trash")?"bg-red-50 text-red-600":"text-slate-500 hover:bg-red-50"}`},React.createElement(n,{name:"trash-2",size:18})," Trash"),React.createElement("button",{onClick:()=>Te(!0),className:"w-9 h-9 flex items-center justify-center text-slate-400 hover:text-slate-700 hover:bg-slate-100 rounded-xl transition-all shrink-0"},React.createElement(n,{name:"settings",size:18,className:"text-sm"}))))),React.createElement("main",{className:"flex-1 flex flex-col h-screen min-w-0 bg-slate-50/50"},React.createElement("header",{className:"h-16 sm:h-20 bg-white/80 backdrop-blur-md border-b border-slate-200 flex items-center justify-between px-4 sm:px-8 z-40 shrink-0"},React.createElement("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0"},React.createElement("button",{className:"sm:hidden p-2 text-slate-500 hover:bg-slate-100 rounded-lg shrink-0",onClick:()=>q(!0)},React.createElement(n,{name:"menu"})),React.createElement("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3"},p.includes("All")||p.includes("AllTags")||p.includes("Trash")?React.createElement("h2",{className:"text-base sm:text-lg font-bold text-slate-900 capitalize truncate"},p.includes("AllTags")?"All Tags":p.includes("Trash")?"Trash":"All Bookmarks"):p.map(e=>React.createElement("div",{key:e,className:"group flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-600 rounded-full text-sm font-bold cursor-pointer hover:bg-red-50 hover:text-red-500 transition-all border border-transparent hover:border-red-200",onClick:()=>C(e,!0)},e.startsWith("tag:")?React.createElement(React.Fragment,null,React.createElement("span",{className:"font-black",style:{color:g.find(t=>t.name===e.split(":")[1])?.color||"#64748b"}},"#"),React.createElement("span",null,e.split(":")[1])):e==="Unsorted"?React.createElement(React.Fragment,null,React.createElement(n,{name:"inbox",size:12,className:"text-slate-400"}),React.createElement("span",null,"Unsorted")):React.createElement(React.Fragment,null,React.createElement(n,{name:"folder",size:13,style:{color:i.find(t=>t.name===e)?.color||"#94a3b8"}}),React.createElement("span",null,e)),React.createElement(n,{name:"x",className:"ml-1 opacity-0 group-hover:opacity-100 w-3 h-3"}))),!p.includes("Trash")&&!p.includes("AllTags")&&React.createElement("div",{className:"relative dropdown-container"},React.createElement("button",{onClick:e=>{e.stopPropagation(),f(W==="headerFilter"?null:"headerFilter")},className:"w-8 h-8 flex items-center justify-center bg-slate-100 text-slate-500 rounded-full hover:bg-slate-200 transition-all shadow-sm shrink-0"},React.createElement(n,{name:"plus",size:14})),W==="headerFilter"&&React.createElement("div",{className:"absolute top-full left-0 mt-3 w-[420px] bg-white rounded-2xl shadow-2xl border border-slate-100 z-[100] p-4 flex gap-6",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"flex-1 max-h-72 overflow-y-auto custom-scrollbar pr-1"},React.createElement("div",{className:"text-[10px] font-bold text-slate-400 uppercase px-2 mb-3 tracking-widest"},"Folders"),React.createElement("div",{className:"space-y-0.5"},!p.includes("All")&&React.createElement("div",{onClick:e=>{e.stopPropagation(),C("All",!0),f(null)},className:"flex items-center gap-2 px-3 py-2 hover:bg-slate-50 rounded-xl cursor-pointer text-sm font-bold text-slate-700 transition-colors"},React.createElement(n,{name:"layers",size:14,className:"text-slate-400"})," All Bookmarks"),!p.includes("Unsorted")&&React.createElement("div",{onClick:e=>{e.stopPropagation(),C("Unsorted",!0),f(null)},className:"flex items-center gap-2 px-3 py-2 hover:bg-slate-50 rounded-xl cursor-pointer text-sm font-bold text-slate-700 transition-colors"},React.createElement(n,{name:"inbox",size:14,className:"text-slate-400"})," Unsorted"),i.filter(e=>!p.includes(e.name)).map(e=>React.createElement("div",{key:e.name,onClick:t=>{t.stopPropagation(),C(e.name,!0),f(null)},className:"flex items-center gap-2 px-3 py-2 hover:bg-slate-50 rounded-xl cursor-pointer text-sm font-bold text-slate-700 transition-colors"},React.createElement(n,{name:"folder",size:14,style:{color:e.color}}),e.name)),i.filter(e=>!p.includes(e.name)).length===0&&p.includes("All")&&p.includes("Unsorted")&&React.createElement("div",{className:"px-3 py-2 text-xs text-slate-400 italic"},"No more folders"))),React.createElement("div",{className:"w-px bg-slate-100 self-stretch"}),React.createElement("div",{className:"flex-1 max-h-72 overflow-y-auto custom-scrollbar pl-1"},React.createElement("div",{className:"text-[10px] font-bold text-slate-400 uppercase px-2 mb-3 tracking-widest"},"Tags"),React.createElement("div",{className:"space-y-0.5"},g.filter(e=>!p.includes(`tag:${e.name}`)).length>0?g.filter(e=>!p.includes(`tag:${e.name}`)).sort((e,t)=>(V[t.name]||0)-(V[e.name]||0)).map(e=>React.createElement("div",{key:e.id,onClick:t=>{t.stopPropagation(),C(`tag:${e.name}`,!0),f(null)},className:"flex items-center gap-2 px-3 py-2 hover:bg-slate-50 rounded-xl cursor-pointer text-sm font-bold text-slate-700 transition-colors"},React.createElement("span",{className:"font-black",style:{color:e.color}},"#"),e.name)):React.createElement("div",{className:"px-3 py-2 text-xs text-slate-400 italic"},"No more tags"))))))),React.createElement("div",{className:"flex items-center gap-2 sm:gap-4"},React.createElement("div",{className:"relative hidden md:block"},React.createElement(n,{name:"search",className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:14}),React.createElement("input",{type:"text",placeholder:"Search...",value:B,onChange:e=>Le(e.target.value),className:"pl-11 pr-4 py-2.5 bg-slate-100 border-transparent rounded-full text-sm w-48 focus:w-80 focus:bg-white focus:border-slate-200 focus:ring-4 focus:ring-slate-50 outline-none transition-all"})),React.createElement("div",{className:"h-8 w-[1px] bg-slate-100 mx-1 hidden md:block"}),React.createElement("div",{className:"relative",tabIndex:"0",onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||Fe(!1)}},React.createElement("button",{onClick:()=>Fe(!Je),className:"flex items-center gap-2 bg-slate-100 px-3 sm:px-4 py-2 rounded-full text-xs font-bold text-slate-600 hover:bg-slate-200 focus:outline-none transition-colors"},React.createElement(n,{name:"columns"}),React.createElement("span",{className:"hidden sm:inline"}," ",R," Column")),Je&&React.createElement("div",{className:"absolute right-0 top-full mt-2 w-32 bg-white border border-slate-100 shadow-xl rounded-xl overflow-hidden z-[60]"},[1,2,3,4,5].map(e=>React.createElement("button",{key:e,onClick:()=>{St(e),Fe(!1)},className:`w-full text-left px-4 py-2.5 text-xs font-bold ${R===e?"bg-blue-50 text-blue-600":"text-slate-600 hover:bg-slate-50"}`},e," Column")))),p.includes("Trash")?React.createElement("button",{onClick:Yt,className:"text-white bg-red-500 px-5 py-2.5 rounded-full text-xs font-bold hover:bg-red-600 transition-all shadow-md active:scale-95 flex items-center"},React.createElement(n,{name:"trash-2",size:18,className:"mr-2"})," CLEAR ALL"):React.createElement("button",{onClick:()=>je(!0),className:"text-white px-4 sm:px-5 py-2 sm:py-2.5 rounded-full text-xs font-bold hover:opacity-90 transition-all shadow-md active:scale-95 flex items-center",style:{backgroundColor:E}},React.createElement(n,{name:"plus",className:"sm:mr-2"}),React.createElement("span",{className:"hidden sm:inline"}," NEW")))),React.createElement("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 md:p-8 custom-scrollbar"},p.includes("AllTags")?React.createElement("div",{className:"mx-auto max-w-4xl"},React.createElement("div",{className:"mb-8"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"w-10 h-10 rounded-xl bg-slate-100 flex items-center justify-center"},React.createElement(n,{name:"tags",className:"text-slate-500"})),React.createElement("div",null,React.createElement("h3",{className:"text-xl font-bold text-slate-900"},"Tag Collection"),React.createElement("p",{className:"text-sm text-slate-400 font-medium"},g.length," tag",g.length!==1?"s":""," in your archive")))),g.length>0?React.createElement("div",{className:"flex flex-wrap gap-3"},g.map(e=>{let t=V[e.name]||0;return React.createElement("button",{key:e.id,onClick:()=>C(`tag:${e.name}`),className:"group flex items-center gap-2.5 px-5 py-3 rounded-2xl text-[14px] font-bold transition-all active:scale-95 border bg-white border-slate-200 text-slate-700 hover:border-slate-300 hover:shadow-md hover:-translate-y-0.5"},React.createElement("span",{className:"font-black text-[16px]",style:{color:e.color}},"#"),React.createElement("span",null,e.name),React.createElement("span",{className:"text-[11px] font-bold px-2 py-0.5 rounded-full bg-slate-100 text-slate-400 ml-1"},t))})):React.createElement("div",{className:"flex flex-col items-center justify-center py-20 opacity-30"},React.createElement(n,{name:"tags",className:"text-4xl mb-4"}),React.createElement("p",{className:"text-sm font-bold uppercase tracking-widest"},"No Tags Yet"),React.createElement("p",{className:"text-xs mt-2"},"Tags will appear here as you add them to your bookmarks"))):React.createElement(React.Fragment,null,React.createElement("div",{className:`mx-auto ${sa.padding}`},React.createElement("div",{className:"flex gap-3 sm:gap-6 items-start justify-center"},aa.map((e,t)=>React.createElement("div",{key:t,className:"flex-1 flex flex-col gap-3 sm:gap-6 min-w-0"},e.map(a=>React.createElement("div",{key:a.id,draggable:!0,onDragStart:s=>{s.stopPropagation(),ie.current={type:"tweet",ids:[a.id]}},onClick:()=>{p.includes("Trash")||(M(a),fe(a),Ce(!1))},className:`group bg-white rounded-[1.25rem] sm:rounded-[1.5rem] border ${X&&ce==="border"?a.url&&a.url.includes("reddit.com")?"border-[#ff4500]":"border-[#1da1f2]":"border-slate-200"} shadow-sm overflow-hidden relative w-full transition-all duration-300 ${p.includes("Trash")?"opacity-70":""} hover:border-slate-400 p-3 sm:p-4`},React.createElement("div",{className:"w-full"},a.tweetText?React.createElement(Ct,{bookmark:a,onImageClick:Dt}):a.url&&a.url.includes("reddit.com")?React.createElement(kt,{url:a.url}):React.createElement(Nt,{tweetId:a.tweetId})),React.createElement("div",{className:"mt-4 space-y-3"},a.description&&React.createElement("div",{className:"bg-slate-50/50 border border-slate-100 p-3 rounded-2xl"},React.createElement("p",{className:"text-[13px] font-medium text-slate-700 leading-relaxed line-clamp-3 break-words"},a.description)),React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"flex flex-wrap gap-1.5 flex-1 min-w-0"},React.createElement("button",{onClick:s=>{s.stopPropagation(),C(a.folder||"Unsorted")},className:"inline-flex items-center px-2 py-0.5 bg-slate-100 text-slate-500 rounded-lg text-[10px] font-bold uppercase tracking-wider whitespace-nowrap hover:bg-slate-200 transition-colors"},React.createElement(n,{name:"folder",className:"mr-1",size:12,style:{color:i.find(s=>s.name===a.folder)?.color||"#94a3b8"}})," ",a.folder||"Unsorted"),(a.tags||[]).map(s=>{let o=g.find(r=>r.name===s);return React.createElement("button",{key:s,onClick:r=>{r.stopPropagation(),C(`tag:${s}`)},className:"flex items-center gap-1 px-2 py-0.5 bg-slate-50 border border-slate-100 text-slate-500 rounded-lg text-[10px] font-semibold truncate hover:bg-slate-100 transition-colors"},React.createElement("span",{className:"font-black",style:{color:o?.color||"#64748b"}},"#"),s)})),React.createElement("div",{className:"flex items-center gap-2 shrink-0"},p.includes("Trash")?React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:s=>Vt(s,a.id),className:"text-green-500 hover:text-green-600"},React.createElement(n,{name:"rotate-ccw"})),React.createElement("button",{onClick:s=>qt(s,a.id),className:"text-red-500 hover:text-red-700"},React.createElement(n,{name:"trash-2",size:18}))):React.createElement("button",{onClick:s=>ct(s,a.id),className:"opacity-0 group-hover:opacity-100 text-slate-300 hover:text-red-600 transition-all p-1"},React.createElement(n,{name:"trash-2",size:18,className:"text-[13px]"})),React.createElement("a",{href:a.url,target:"_blank",onClick:s=>s.stopPropagation(),className:"w-7 h-7 flex items-center justify-center bg-white border border-slate-200 shadow-sm text-slate-400 hover:text-black rounded-lg transition-all"},React.createElement(n,{name:"external-link",size:12}))))),X&&ce==="bar"&&React.createElement("div",{className:"absolute bottom-0 left-0 right-0 h-[6px]",style:{backgroundColor:a.url&&a.url.includes("reddit.com")?"#ff4500":"#1da1f2"}}))))))),me.length>Pe&&React.createElement("div",{ref:Ue,className:"h-10 w-full"}),me.length===0&&React.createElement("div",{className:"flex flex-col items-center justify-center py-20 opacity-30"},React.createElement(n,{name:"layers",size:18,className:"text-4xl mb-4"}),React.createElement("p",{className:"text-sm font-bold uppercase tracking-widest"},"No Content Found"))))),v&&React.createElement("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-2 sm:p-4 md:p-8 overflow-y-auto",onClick:()=>M(null)},React.createElement("div",{className:"bg-white w-full max-w-5xl rounded-2xl sm:rounded-3xl shadow-2xl overflow-hidden modal-enter flex flex-col md:flex-row h-fit max-h-[95vh]",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"flex-1 bg-slate-100 p-4 sm:p-8 md:p-12 lg:p-16 overflow-y-auto custom-scrollbar flex items-start justify-center min-h-[200px] sm:min-h-[400px]"},React.createElement("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-sm border border-slate-200 p-3 sm:p-5"},v.tweetText?React.createElement(Ct,{bookmark:v,onImageClick:(e,t,a,s)=>J({medias:e,currentIndex:t,mediaType:a||v.mediaType,poster:s})}):v.url&&v.url.includes("reddit.com")?React.createElement(kt,{url:v.url}):React.createElement(Nt,{tweetId:v.tweetId,key:`focus-${v.id}`}))),React.createElement("div",{className:"w-full md:w-[350px] p-5 sm:p-8 border-l border-slate-100 flex flex-col justify-between bg-white overflow-y-auto custom-scrollbar relative"},React.createElement("div",{onClick:()=>{W&&f(null)}},React.createElement("div",{className:"flex justify-between items-center mb-4 border-b border-slate-50 pb-3"},React.createElement("div",null,v.date&&React.createElement("span",{className:"text-[11px] text-slate-400 font-medium flex items-center"},React.createElement(n,{name:"calendar",className:"mr-1.5",size:12}),oa(v.date))),React.createElement("div",{className:"flex items-center gap-1.5"},le&&JSON.stringify({...le,date:null,timestamp:null})!==JSON.stringify({...v,date:null,timestamp:null})&&React.createElement("button",{onClick:()=>{M(le),c(e=>e.map(t=>t.id===le.id?le:t))},className:"w-8 h-8 flex items-center justify-center hover:bg-orange-50 text-orange-400 rounded-full transition-all",title:"Revert Changes"},React.createElement(n,{name:"rotate-ccw",className:"text-[16px]"})),React.createElement("button",{onClick:()=>{M(null),Ce(!1)},className:"w-8 h-8 flex items-center justify-center hover:bg-slate-100 rounded-full transition-all text-slate-400"},React.createElement(n,{name:"x",className:"text-xl"})))),React.createElement("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4"},"Your Note"),Ut?React.createElement("textarea",{autoFocus:!0,value:v.description||"",onChange:e=>{let t=e.target.value,a={...v,description:t};M(a),c(s=>s.map(o=>o.id===a.id?a:o))},onBlur:()=>Ce(!1),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none resize-none focus:ring-1 focus:ring-blue-400 mb-5",rows:"4",placeholder:"Empty note..."}):React.createElement("div",{onClick:e=>{e.stopPropagation(),Ce(!0)},className:"bg-slate-50 p-4 rounded-xl border border-slate-100 mb-5 cursor-text hover:bg-slate-100 hover:border-slate-200 transition-colors min-h-[80px]"},React.createElement("p",{className:"text-slate-800 font-medium leading-relaxed break-words whitespace-pre-wrap"},v.description||React.createElement("span",{className:"text-slate-400 italic"},"No note added. Click to write..."))),React.createElement("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3"},"Folder"),React.createElement("div",{className:"flex flex-wrap gap-2 mb-5 relative"},v.folder&&v.folder!=="General"&&v.folder!=="Unsorted"?React.createElement("div",{className:"group flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-600 rounded-full text-xs font-bold cursor-pointer hover:bg-red-50 hover:text-red-500 transition-all border border-transparent hover:border-red-200",onClick:()=>{let e={...v,folder:"Unsorted"};M(e),c(t=>t.map(a=>a.id===e.id?e:a))}},React.createElement(n,{name:"folder",size:14,style:{color:i.find(e=>e.name===v.folder)?.color||"#94a3b8"}}),React.createElement("span",null,v.folder),React.createElement(n,{name:"x",className:"ml-1 opacity-0 group-hover:opacity-100 w-3 h-3"})):React.createElement("div",{className:"relative dropdown-container"},React.createElement("button",{onClick:e=>{e.stopPropagation(),f(W==="folder"?null:"folder")},className:"w-8 h-8 flex items-center justify-center bg-slate-100 text-slate-500 rounded-full hover:bg-slate-200 transition-all"},React.createElement(n,{name:"plus",size:14})),W==="folder"&&React.createElement("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-slate-100 z-50 p-2 max-h-48 overflow-y-auto custom-scrollbar",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"text-[10px] font-bold text-slate-400 uppercase px-2 mb-1 mt-1"},"Select Folder"),i.length>0?i.map(e=>React.createElement("div",{key:e.name,onClick:t=>{t.stopPropagation();let a={...v,folder:e.name};M(a),c(s=>s.map(o=>o.id===a.id?a:o)),f(null)},className:"flex items-center gap-2 px-3 py-2 hover:bg-slate-50 rounded-lg cursor-pointer text-sm font-medium text-slate-700"},React.createElement(n,{name:"folder",size:14,style:{color:e.color}}),e.name)):React.createElement("div",{className:"px-3 py-2 text-xs text-slate-400 italic"},"No custom folders.")))),React.createElement("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3"},"Tags"),React.createElement("div",{className:"flex flex-wrap gap-2 mb-5 relative dropdown-container"},(v.tags||[]).length>0&&(v.tags||[]).map(e=>React.createElement("div",{key:e,className:"group flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-600 rounded-full text-xs font-bold cursor-pointer hover:bg-red-50 hover:text-red-500 transition-all border border-transparent hover:border-red-200",onClick:()=>{let t=(v.tags||[]).filter(s=>s!==e),a={...v,tags:t};M(a),c(s=>s.map(o=>o.id===a.id?a:o))}},React.createElement("span",{className:"font-black",style:{color:g.find(t=>t.name===e)?.color||"#64748b"}},"#"),React.createElement("span",null,e),React.createElement(n,{name:"x",className:"ml-1 opacity-0 group-hover:opacity-100 w-3 h-3"}))),React.createElement("div",{className:"relative dropdown-container"},React.createElement("button",{onClick:e=>{e.stopPropagation(),f(W==="tag"?null:"tag")},className:"w-8 h-8 flex items-center justify-center bg-slate-100 text-slate-500 rounded-full hover:bg-slate-200 transition-all"},React.createElement(n,{name:"plus",size:14})),W==="tag"&&React.createElement("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-slate-100 z-50 p-2 max-h-48 overflow-y-auto custom-scrollbar",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"text-[10px] font-bold text-slate-400 uppercase px-2 mb-1 mt-1 flex justify-between items-center"},"Select Tag"),g.filter(e=>!(v.tags||[]).includes(e.name)).length>0?g.filter(e=>!(v.tags||[]).includes(e.name)).map(e=>React.createElement("div",{key:e.id,onClick:t=>{t.stopPropagation();let a=[...v.tags||[],e.name],s={...v,tags:a};M(s),c(o=>o.map(r=>r.id===s.id?s:r)),f(null)},className:"flex items-center gap-2 px-3 py-2 hover:bg-slate-50 rounded-lg cursor-pointer text-sm font-medium text-slate-700"},React.createElement("span",{className:"font-black",style:{color:e.color}},"#"),e.name)):React.createElement("div",{className:"px-3 py-2 text-xs text-slate-400 italic"},"No more tags"))))),React.createElement("div",{className:"pt-5 border-t border-slate-50 flex items-center gap-3 mt-auto"},React.createElement("button",{onClick:e=>{ct(e,v.id),M(null)},className:"w-10 h-10 flex items-center justify-center bg-red-50 text-red-500 rounded-xl hover:bg-red-100 transition-all active:scale-95 shrink-0",title:"Move to Trash"},React.createElement(n,{name:"trash-2",size:17})),React.createElement("a",{href:v.url,target:"_blank",className:"flex-1 flex items-center justify-center gap-2 bg-black text-white px-4 py-3 rounded-xl text-xs font-bold shadow-lg hover:bg-slate-800 transition-all active:scale-95"},v.url&&v.url.includes("reddit.com")?"OPEN ON REDDIT":"OPEN ON X"," ",React.createElement(n,{name:"external-link",size:14})))))),Pt&&React.createElement("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[110] flex items-center justify-center p-4",onClick:()=>ae(!1)},React.createElement("div",{className:"bg-white rounded-3xl w-full max-w-sm overflow-hidden shadow-2xl modal-enter",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"p-6 border-b border-gray-50 flex justify-between items-center"},React.createElement("h3",{className:"font-bold text-slate-900"},Q?"Edit Tag":"New Tag"),React.createElement("button",{onClick:()=>ae(!1),className:"w-8 h-8 flex items-center justify-center hover:bg-slate-100 rounded-full transition-all"},React.createElement(n,{name:"x",className:"text-slate-400"}))),React.createElement("form",{onSubmit:Kt,className:"p-6 space-y-4"},React.createElement("div",null,React.createElement("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1"},"Tag Name"),React.createElement("input",{type:"text",required:!0,value:Xe,onChange:e=>ye(e.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-100 rounded-xl text-sm focus:bg-white outline-none transition-all"})),React.createElement("div",null,React.createElement("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1"},"Pick a Color"),React.createElement("div",{className:"flex items-center gap-3"},React.createElement("input",{type:"color",value:Ne,onChange:e=>ke(e.target.value),className:"w-12 h-12 p-1 bg-slate-50 border border-slate-100 rounded-xl cursor-pointer shadow-sm"})," ",React.createElement("span",{className:"text-sm font-medium text-slate-600 uppercase font-mono"},Ne))),React.createElement("div",{className:"flex gap-2 pt-4"},React.createElement("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-3.5 rounded-xl font-bold text-xs shadow-md shadow-green-600/20 hover:bg-green-700 transition-all active:scale-95"},"SAVE"),Q&&React.createElement("button",{type:"button",onClick:()=>{window.confirm("Delete this tag?")&&(w(e=>e.filter(t=>t.id!==Q.id)),c(e=>e.map(t=>({...t,tags:(t.tags||[]).filter(a=>a!==Q.name)}))),ae(!1))},className:"flex-1 bg-red-50 text-red-500 py-3.5 rounded-xl font-bold text-xs hover:bg-red-100 transition-all active:scale-95"},"DELETE"))))),At&&React.createElement("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4"},React.createElement("div",{className:"bg-white rounded-3xl w-full max-w-md overflow-hidden shadow-2xl modal-enter"},React.createElement("div",{className:"p-6 border-b border-gray-50 flex justify-between items-center"},React.createElement("h3",{className:"font-bold text-slate-900"},"Add New Bookmark"),React.createElement("button",{onClick:()=>je(!1),className:"w-8 h-8 flex items-center justify-center hover:bg-slate-100 rounded-full transition-all"},React.createElement(n,{name:"x",className:"text-slate-400"}))),React.createElement("form",{onSubmit:Jt,className:"p-6 space-y-4"},React.createElement("input",{type:"url",required:!0,placeholder:"Tweet URL (https://x.com/...)",value:Be,onChange:e=>et(e.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-100 rounded-xl text-sm focus:bg-white outline-none transition-all"}),React.createElement("div",{className:"grid grid-cols-2 gap-4"},React.createElement(Tt,{value:tt,onChange:at,options:[{name:"General",color:"#94a3b8"},...i],isMulti:!1}),React.createElement(Tt,{value:st,onChange:ot,options:g,isMulti:!0})),React.createElement("textarea",{placeholder:"Your Note...",rows:"3",value:lt,onChange:e=>rt(e.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-100 rounded-xl text-sm focus:bg-white outline-none resize-none transition-all"}),React.createElement("button",{type:"submit",className:"w-full bg-green-600 text-white py-4 rounded-xl font-bold text-sm shadow-md shadow-green-600/20 hover:bg-green-700 transition-all active:scale-95"},"Add to Collection")))),S&&React.createElement("div",{className:"fixed inset-0 bg-slate-900/95 backdrop-blur-md z-[200] flex items-center justify-center p-4 cursor-zoom-out modal-enter",onClick:()=>J(null),onKeyDown:e=>{e.key==="ArrowRight"&&S.medias.length>1&&(e.stopPropagation(),J(t=>({...t,currentIndex:(t.currentIndex+1)%t.medias.length}))),e.key==="ArrowLeft"&&S.medias.length>1&&(e.stopPropagation(),J(t=>({...t,currentIndex:(t.currentIndex-1+t.medias.length)%t.medias.length}))),e.key==="Escape"&&J(null)},tabIndex:0,ref:e=>e&&e.focus()},S.medias.length>1&&React.createElement("button",{onClick:e=>{e.stopPropagation(),J(t=>({...t,currentIndex:(t.currentIndex-1+t.medias.length)%t.medias.length}))},className:"absolute left-4 sm:left-8 top-1/2 -translate-y-1/2 w-12 h-12 flex items-center justify-center bg-white/10 hover:bg-white/25 text-white rounded-full transition-all backdrop-blur-sm z-10"},React.createElement(n,{name:"chevron-left",className:"text-lg"})),S.mediaType==="video"?React.createElement(da,{src:S.medias[S.currentIndex],poster:S.poster,controls:!0,autoPlay:!0,className:"max-w-full max-h-[90vh] rounded-lg shadow-2xl outline-none",onClick:e=>e.stopPropagation()}):React.createElement("img",{src:pe(S.medias[S.currentIndex]),className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onClick:e=>e.stopPropagation()}),S.medias.length>1&&React.createElement("button",{onClick:e=>{e.stopPropagation(),J(t=>({...t,currentIndex:(t.currentIndex+1)%t.medias.length}))},className:"absolute right-4 sm:right-8 top-1/2 -translate-y-1/2 w-12 h-12 flex items-center justify-center bg-white/10 hover:bg-white/25 text-white rounded-full transition-all backdrop-blur-sm z-10"},React.createElement(n,{name:"chevron-right",className:"text-lg"})),S.medias.length>1&&React.createElement("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 bg-black/50 backdrop-blur-sm text-white text-xs font-bold px-4 py-2 rounded-full"},S.currentIndex+1," / ",S.medias.length),React.createElement("button",{onClick:e=>{e.stopPropagation(),ia(pe(S.medias[S.currentIndex]))},className:"absolute top-6 right-20 w-10 h-10 flex items-center justify-center bg-white/10 hover:bg-white/30 text-white rounded-full transition-colors"},React.createElement(n,{name:"download"})),React.createElement("button",{onClick:()=>J(null),className:"absolute top-6 right-6 w-10 h-10 flex items-center justify-center bg-white/10 hover:bg-white/30 text-white rounded-full transition-colors"},React.createElement(n,{name:"x",className:"text-xl"}))),zt&&React.createElement("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[110] flex items-center justify-center p-4",onClick:()=>te(!1)},React.createElement("div",{className:"bg-white rounded-3xl w-full max-w-sm overflow-hidden shadow-2xl modal-enter",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"p-6 border-b border-gray-50 flex justify-between items-center"},React.createElement("h3",{className:"font-bold text-slate-900"},Y?"Edit Folder":"New Folder"),React.createElement("button",{onClick:()=>te(!1),className:"w-8 h-8 flex items-center justify-center hover:bg-slate-100 rounded-full transition-all"},React.createElement(n,{name:"x",className:"text-slate-400"}))),React.createElement("form",{onSubmit:Qt,className:"p-6 space-y-4"},React.createElement("div",null,React.createElement("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1"},"Name"),React.createElement("input",{type:"text",required:!0,value:Ze,onChange:e=>be(e.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-100 rounded-xl text-sm focus:bg-white outline-none transition-all"})),React.createElement("div",null,React.createElement("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1"},"Color"),React.createElement("div",{className:"flex items-center gap-3"},React.createElement("input",{type:"color",value:he,onChange:e=>ve(e.target.value),className:"w-12 h-12 p-1 bg-slate-50 border border-slate-100 rounded-xl cursor-pointer shadow-sm"})," ",React.createElement("span",{className:"text-sm font-medium uppercase"},he))),React.createElement("div",{className:"flex gap-2 pt-4"},React.createElement("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-3.5 rounded-xl font-bold text-xs shadow-md shadow-green-600/20 hover:bg-green-700 transition-all active:scale-95"},"SAVE"),Y&&React.createElement("button",{type:"button",onClick:()=>{window.confirm("Delete this folder?")&&(h(e=>e.filter(t=>t.id!==Y.id)),c(e=>e.map(t=>t.folder===Y.name?{...t,folder:"Unsorted"}:t)),te(!1))},className:"flex-1 bg-red-50 text-red-500 py-3.5 rounded-xl font-bold text-xs hover:bg-red-100 transition-all active:scale-95"},"DELETE"))))),Ot&&React.createElement("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[110] flex items-center justify-center p-4",onClick:()=>Te(!1)},React.createElement("div",{className:"bg-white rounded-3xl w-full max-w-md overflow-hidden shadow-2xl modal-enter",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"p-6 border-b border-gray-50 flex justify-between items-center"},React.createElement("h3",{className:"font-bold text-slate-900 text-lg"},"Settings"),React.createElement("button",{onClick:()=>Te(!1),className:"w-8 h-8 flex items-center justify-center hover:bg-slate-100 rounded-full transition-all"},React.createElement(n,{name:"x",className:"text-slate-400"}))),React.createElement("div",{className:"p-6 space-y-6"},React.createElement("div",null,React.createElement("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-3"},"Accent Color"),React.createElement("div",{className:"flex flex-wrap gap-2 mb-4"},["#000000","#3b82f6","#8b5cf6","#ec4899","#ef4444","#f97316","#10b981","#06b6d4"].map(e=>React.createElement("button",{key:e,onClick:()=>Se(e),className:`w-9 h-9 rounded-xl transition-all shadow-sm hover:scale-110 ${E===e?"ring-2 ring-offset-2 ring-slate-400 scale-110":""}`,style:{backgroundColor:e}}))),React.createElement("div",{className:"flex items-center gap-3"},React.createElement("input",{type:"color",value:E,onChange:e=>Se(e.target.value),className:"w-10 h-10 p-1 bg-slate-50 border border-slate-100 rounded-xl cursor-pointer shadow-sm"}),React.createElement("input",{type:"text",value:E,onChange:e=>{/^#[0-9a-fA-F]{0,6}$/.test(e.target.value)&&Se(e.target.value)},onBlur:e=>{!/^#[0-9a-fA-F]{6}$/i.test(E)&&!/^#[0-9a-fA-F]{3}$/i.test(E)&&Se("#000000")},className:"flex-1 px-4 py-2.5 bg-slate-50 border border-slate-100 rounded-xl text-sm font-mono uppercase outline-none focus:bg-white transition-all"}))),React.createElement("div",{className:"pt-6 border-t border-slate-50"},React.createElement("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-4"},"Display Theme"),React.createElement("div",{className:"grid grid-cols-3 gap-3"},[{id:"light",name:"Light",bg:"#f8fafc",text:"#0f172a",border:"#e2e8f0"},{id:"dark",name:"Classic Dark",bg:"#15202b",text:"#ffffff",border:"#38444d"},{id:"oldschool",name:"Old School",bg:"#000000",text:"#d9d9d9",border:"#2f3336"}].map(e=>React.createElement("button",{key:e.id,onClick:()=>Bt(e.id),className:`relative overflow-hidden group p-3 rounded-2xl border-2 transition-all flex flex-col gap-2 items-center ${K===e.id?"border-blue-500 bg-blue-50/10":"border-slate-100 bg-slate-50 hover:border-slate-200"}`},React.createElement("div",{className:"w-full h-8 rounded-lg shadow-inner flex items-center justify-center text-[10px] font-bold",style:{backgroundColor:e.bg,color:e.text,border:`1px solid ${e.border}`}},"Aa"),React.createElement("span",{className:`text-[11px] font-bold ${K===e.id?"text-blue-600":"text-slate-500"}`},e.name),K===e.id&&React.createElement("div",{className:"absolute top-1 right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center shadow-sm"},React.createElement(n,{name:"check",className:"text-[8px] text-white"})))))),React.createElement("div",{className:"pt-6 border-t border-slate-50"},React.createElement("div",{className:"flex justify-between items-center mb-4"},React.createElement("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block"},"Storage Usage (IndexedDB)"),React.createElement("span",{className:`text-[9px] font-black px-2 py-0.5 rounded-full ${G.used/(1024*1024)<80?"bg-green-100 text-green-600":G.used/(1024*1024)<90?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}`},G.used/(1024*1024)<80?"OPTIMIZED":G.used/(1024*1024)<90?"HEAVY":"CRITICAL")),React.createElement("div",{className:"bg-slate-50 border border-slate-100 rounded-2xl p-4"},React.createElement("div",{className:"flex justify-between items-end mb-2"},React.createElement("span",{className:"text-xs font-bold text-slate-700"},"Archive Size"),React.createElement("span",{className:"text-[10px] font-bold text-slate-400"},(G.used/(1024*1024)).toFixed(2)," MB / 100 MB")),React.createElement("div",{className:"w-full h-1.5 bg-slate-200 rounded-full overflow-hidden"},React.createElement("div",{className:`h-full transition-all duration-700 ${G.used/(1024*1024)<80?"bg-green-500":G.used/(1024*1024)<90?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(G.used/(1024*1024*100)*100,100)||0}%`}})),React.createElement("p",{className:"mt-3 text-[10px] font-medium text-slate-400 leading-relaxed italic"},"Performance starts to degrade after 100MB due to memory constraints."))),React.createElement("div",{className:"pt-6 border-t border-slate-50 font-sans"},React.createElement("div",{className:"flex items-center justify-between mb-2"},React.createElement("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block"},"Marka \xC7izgisi Ekleme"),React.createElement("button",{onClick:()=>Wt(!X),className:`w-10 h-5 rounded-full transition-all relative ${X?"bg-blue-500":"bg-slate-200"}`},React.createElement("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${X?"right-1":"left-1"}`}))),X&&React.createElement("div",{className:"mb-4"},React.createElement("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2"},"\xC7izgi Stili"),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>nt("bar"),className:`flex-1 py-2 px-3 rounded-xl text-[11px] font-bold transition-all border ${ce==="bar"?"bg-blue-50 border-blue-200 text-blue-600":"bg-slate-50 border-slate-100 text-slate-500"}`},"Alt \xC7izgi"),React.createElement("button",{onClick:()=>nt("border"),className:`flex-1 py-2 px-3 rounded-xl text-[11px] font-bold transition-all border ${ce==="border"?"bg-blue-50 border-blue-200 text-blue-600":"bg-slate-50 border-slate-100 text-slate-500"}`},"Kenarl\u0131k"))),React.createElement("div",{className:"flex items-center justify-between mb-2"},React.createElement("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block"},"Automatic Backup"),React.createElement("div",{onClick:()=>Rt(!Z),className:`w-10 h-5 rounded-full relative cursor-pointer transition-all duration-300 ${Z?"bg-green-500":"bg-slate-200"}`},React.createElement("div",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow-sm transition-all duration-300 ${Z?"left-5.5":"left-0.5"}`,style:{left:Z?"22px":"2px"}}))),React.createElement("p",{className:"text-[10px] text-slate-400 font-medium leading-relaxed italic pr-8"},"Automatically creates a JSON backup file once a day when you open the app."),React.createElement("div",{className:"mt-4 flex gap-2"},React.createElement("button",{onClick:()=>{Me()},className:"flex-1 bg-slate-100 hover:bg-slate-200 text-slate-700 py-3 rounded-xl text-[11px] font-bold transition-all active:scale-95"},"MANUAL EXPORT"),React.createElement("button",{onClick:()=>{window.confirm("Clear all archived data? THIS CANNOT BE UNDONE!")&&(I.bookmarks.clear(),I.folders.clear(),I.tags.clear(),I.trash.clear(),window.location.reload())},className:"flex-1 bg-red-50 hover:bg-red-100 text-red-500 py-3 rounded-xl text-[11px] font-bold transition-all active:scale-95"},"WIPE DATABASE")))))),it.length>0&&React.createElement("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 sm:left-auto sm:translate-x-0 sm:right-6 sm:bottom-6 z-[300] flex flex-col gap-2.5 pointer-events-none w-[calc(100%-2rem)] sm:w-auto"},it.map(e=>React.createElement("div",{key:e.id,className:"pointer-events-auto flex items-center gap-3 px-5 py-3.5 bg-white border border-slate-200 rounded-2xl shadow-xl text-sm font-semibold text-slate-700 animate-slide-in-right min-w-[280px] max-w-[400px]"},React.createElement("i",{className:`text-xs ${e.type==="success"?"fa-solid fa-check-circle text-green-500":e.type==="error"?"fa-solid fa-exclamation-circle text-red-500":"fa-solid fa-info-circle text-blue-500"}`}),React.createElement("span",{className:"flex-1"},e.message),e.undoAction&&React.createElement("button",{onClick:()=>{e.undoAction(),dt(e.id)},className:"text-xs font-bold text-blue-600 hover:text-blue-700 uppercase tracking-wider shrink-0 px-2 py-1 hover:bg-blue-50 rounded-lg transition-all"},"Undo"),React.createElement("button",{onClick:()=>dt(e.id),className:"text-slate-300 hover:text-slate-500 transition-colors ml-1"},React.createElement(n,{name:"x",className:"text-xs"})))))):React.createElement("div",{className:"flex h-screen w-full items-center justify-center bg-slate-50 flex-col gap-4"},React.createElement(n,{name:"loader",className:"fa-spin text-4xl text-slate-300"}),React.createElement("p",{className:"font-bold text-slate-500 uppercase tracking-widest text-sm"},"Loading Database..."))}try{let l=document.getElementById("root");l&&ReactDOM.createRoot(l).render(React.createElement(ua,null))}catch(l){console.error("Failed to render App:",l)}})();
